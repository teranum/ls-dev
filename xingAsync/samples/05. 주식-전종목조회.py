# -*- coding: euc-kr -*-
from xingAsync import *
from common import *
from app_key import user_id, user_pwd, cert_pwd # app_key.py 파일에 사용자 ID, 비번, 공증 비번을 저장해두고 import

async def sample(api: XingApi):
    if not await api.login(user_id, user_pwd, cert_pwd):
        return print(f"로그인 실패: {api.last_message}")

    response = await api.request("t8430", "0") # 0:전체1:코스피2:코스닥
    if not response: return print(f'요청실패: {api.last_message}')

    print(response)

if __name__ == "__main__":
    api = XingApi()
    run_loop(sample(api))

# Output:
'''
t8430: [00000] 정상적으로 조회가 완료되었습니다.
t8430InBlock, Fields = 1, Count = 1
+-------+
| gubun |
+-------+
|   0   |
+-------+
t8430OutBlock, Fields = 10, Count = 4054
+----------------------+--------+--------------+----------+------------+------------+-----------+---------+----------+-------+
|        hname         | shcode |   expcode    | etfgubun | uplmtprice | dnlmtprice | jnilclose | memedan | recprice | gubun |
+----------------------+--------+--------------+----------+------------+------------+-----------+---------+----------+-------+
|       동화약품       | 000020 | KR7000020008 |    0     |    8690    |    4690    |    6690   |  00001  |   6690   |   1   |
|       KR모터스       | 000040 | KR7000040006 |    0     |    616     |    332     |    474    |  00001  |   474    |   1   |
|         경방         | 000050 | KR7000050005 |    0     |    7690    |    4150    |    5920   |  00001  |   5920   |   1   |
|      삼양홀딩스      | 000070 | KR7000070003 |    0     |   87300    |   47100    |   67200   |  00001  |  67200   |   1   |
|     삼양홀딩스우     | 000075 | KR7000071001 |    0     |   71800    |   38800    |   55300   |  00001  |  55300   |   1   |
|      하이트진로      | 000080 | KR7000080002 |    0     |   26000    |   14000    |   20000   |  00001  |  20000   |   1   |
|    하이트진로2우B    | 000087 | KR7000082008 |    0     |   20950    |   11300    |   16140   |  00001  |  16140   |   1   |
|       유한양행       | 000100 | KR7000100008 |    0     |   159100   |   85700    |   122400  |  00001  |  122400  |   1   |
|      유한양행우      | 000105 | KR7000101006 |    0     |   141400   |   76200    |   108800  |  00001  |  108800  |   1   |
|      CJ대한통운      | 000120 | KR7000120006 |    0     |   102500   |   55300    |   78900   |  00001  |  78900   |   1   |
...
|         JTC          | 950170 | KR8392080006 |    0     |    4670    |    2520    |    3595   |  00001  |   3595   |   2   |
|    고스트스튜디오    | 950190 | KR8344390008 |    0     |   12350    |    6650    |    9500   |  00001  |   9500   |   2   |
|        소마젠        | 950200 | KR8840150005 |    0     |    5120    |    2760    |    3940   |  00001  |   3940   |   2   |
|      네오이뮨텍      | 950220 | KR8840140006 |    0     |    1612    |    868     |    1240   |  00001  |   1240   |   2   |
+----------------------+--------+--------------+----------+------------+------------+-----------+---------+----------+-------+
+----------------------------+
|  request / elipsed times   |
+----------------------------+
| 2024-11-15 23:37:02.074292 |
|       0:00:00.153449       |
+----------------------------+
'''